{% extends 'base.html' %}
{% block main %}

<h1>Dashboard</h1>

<div class="dashboard-grid">
    <div class="card metric-card">
        <h3>Total de Produtos</h3>
        <p>{{ total_products }}</p>
    </div>

    <div class="card metric-card">
        <h3>Vendas</h3>
        <p>{{ total_sales }}</p>
    </div>

    <div class="card metric-card">
        <h3>Faturamento</h3>
        <p>R$ {{ total_biling }}</p>
    </div>

    <div class="card metric-card">
        <h3>Estoque Baixo</h3>
        <p>{{ low_stock }}</p>
    </div>
</div>

<hr>

<h2>Vendas por MÃªs</h2>
<canvas id="salesChart"></canvas>

<h2>Top 5 Produtos Mais Vendidos</h2>
<canvas id="topProductsChart"></canvas>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
    const salesCtx = document.getElementById('salesChart');
    new Chart(salesCtx, {
        type: 'line',
        data: {
            labels: {{ sales_labels|safe }},
            datasets: [{
                label: 'Vendas (Quantidade)',
                data: {{ sales_values|safe }},
                borderWidth: 2
            }]
        }
    });

    const topProductsCtx = document.getElementById('topProductsChart');
    new Chart(topProductsCtx, {
        type: 'bar',
        data: {
            labels: {{ top_products_labels|safe }},
            datasets: [{
                label: 'Unidades Vendidas',
                data: {{ top_products_values|safe }},
                borderWidth: 2
            }]
        }
    });
</script>

{% endblock %}
